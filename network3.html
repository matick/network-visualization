<!DOCTYPE HTML>
<html>
<head>
  <title>vis network</title>
  <script src="vis/dist/vis.js"></script>
  <script src="jquery-1.11.1.min.js"></script>
  
  <style type="text/css">
  	html, body {
      height:100%;
  	}
  </style>
  
  <script type="text/javascript">
  var jsonTestObject = {"parentid": null,
								"states": [
		                               {"pos": [0,0], "radius": 15},
		                               {"pos": [1,0], "radius": 10},
		                               {"pos": [0,0], "radius": 18},
		                               {"pos": [0,0], "radius": 15},
		                               {"pos": [0,0], "radius": 15},
		                               {"pos": [0,0], "radius": 15},
		                               {"pos": [0,0], "radius": 25},
		                               {"pos": [1,0], "radius": 10}
		                               ],
								"transitions": [
								        [-1, 0.1, 0.1, 0.6, 0, 0, 0, 0.1],
								        [1, -1, 0, 0, 0, 0, 0, 0],
								       	[1, 0, -1, 1, 0, 0, 0, 0],
								        [0.7, 0, 0.3, -1, 0, 0, 0, 0],
								        [0.4, 0, 0.6, 0, -1, 0, 0, 0],
								        [0, 0, 1, 0, 0, -1, 0, 0],
								        [0.5, 0, 0.5, 0, 0, 0, -1, 0],
								        [0, 0, 0.65, 0, 0, .035, 0, -1]
								          ]
	};
	
	var jsonTestChildrenObject = {"parentid": 2,
								"states": [
									{"pos": [0,0], "radius": 15},
									{"pos": [1,0], "radius": 10},
									{"pos": [0,0], "radius": 15},
								],
								"transitions": [
									[-1, 0, 1],
									[0.5, -1, 0.5],
									[0, 1, -1]
								]
	};
	
	var jsonTestChildrenObject2 = {"parentid": 10,
			"states": [
				{"pos": [0,0], "radius": 7},
				{"pos": [1,0], "radius": 8},
				{"pos": [0,0], "radius": 9},
			],
			"transitions": [
				[-1, 0, 1],
				[0.5, -1, 0.5],
				[0, 1, -1]
			]
	};
	
	var jsonTestChildrenObject3 = {"parentid": 3,
			"states": [
				{"pos": [0,0], "radius": 7},
				{"pos": [1,0], "radius": 8},
				{"pos": [0,0], "radius": 9},
			],
			"transitions": [
				[-1, 0, 1],
				[0.5, -1, 0.5],
				[0, 1, -1]
			]
	};
	
	var jsonTestChildrenObject4 = {"parentid": 14,
			"states": [
				{"pos": [0,0], "radius": 8},
				{"pos": [1,0], "radius": 9},
				{"pos": [0,0], "radius": 10},
			],
			"transitions": [
				[-1, 0, 1],
				[0.5, -1, 0.5],
				[0, 1, -1]
			]
	};
	
	var jsonTestNewObject1 = {
			   "id": 0,
			   "states": [
			      [
			         0.755779,
			         0.876164,
			         0.855226,
			         0.781042,
			         0.959464,
			         0.233883,
			         0.263261,
			         0.244822
			      ],
			      [
			         0.736715,
			         0.453389,
			         0.131247,
			         0.795694,
			         0.747271,
			         0.937503,
			         0.246262,
			         0.263891
			      ],
			      [
			         0.043263,
			         0.364296,
			         0.315284,
			         0.360658,
			         0.031364,
			         0.451455,
			         0.07174,
			         0.957957
			      ],
			      [
			         0.749746,
			         0.527383,
			         0.352904,
			         0.790783,
			         0.712515,
			         0.648954,
			         0.243027,
			         0.25087
			      ],
			      [
			         0.746296,
			         0.646377,
			         0.524622,
			         0.783657,
			         0.962302,
			         0.33411,
			         0.275675,
			         0.254328
			      ],
			      [
			         0.777374,
			         0.261833,
			         0.462005,
			         0.423974,
			         0.009529,
			         0.760484,
			         0.010506,
			         0.220709
			      ],
			      [
			         0.731603,
			         0.568913,
			         0.2896,
			         0.782142,
			         0.709558,
			         0.025213,
			         0.278115,
			         0.256824
			      ],
			      [
			         0.800828,
			         0.708448,
			         0.747118,
			         0.422888,
			         0.008329,
			         0.219877,
			         0.008883,
			         0.199504
			      ]
			   ],
			   "children": [
					{"id": 1, "intensities": [[-1, 1], [0, 0]], "children": []},
					{"id": 2, "intensities": [[-3, 1, 2], [0, -2, 2], [1, 0, -1]], 
						"children": [ {"id": 3, "intensities": [[-4, 2, 2], [1, -2, 1], [1, 0, -1]], "children": []}]}
			   ],
			   "intensities":[
			      [
			         -5.013928,
			         0,
			         0,
			         0,
			         0,
			         0,
			         0,
			         5.013928
			      ],
			      [
			         0,
			         -2.155689,
			         0,
			         2.155689,
			         0,
			         0,
			         0,
			         0
			      ],
			      [
			         0,
			         0,
			         -17.101898,
			         0,
			         0,
			         9.207161,
			         0,
			         7.894737
			      ],
			      [
			         0,
			         0,
			         0,
			         -3.71134,
			         3.71134,
			         0,
			         0,
			         0
			      ],
			      [
			         4.422604,
			         0,
			         0,
			         0,
			         -4.422604,
			         0,
			         0,
			         0
			      ],
			      [
			         0,
			         33.962264,
			         4.406365,
			         0,
			         0,
			         -38.368629,
			         0,
			         0
			      ],
			      [
			         0,
			         0,
			         0,
			         0,
			         0,
			         0,
			         0,
			         0
			      ],
			      [
			         0,
			         0,
			         5.034965,
			         0,
			         0,
			         70.588235,
			         124.137931,
			         -199.761131
			      ]
			   ]
			};
	
	var jsonTestNewObject = {
			  "id": "0",
			  "size": 30001,
			  "states": [
			    {
			      "meanCentroidDist": 0.524958,
			      "size": 4528,
			      "centroid": [
			        0.09,
			        0.373125,
			        0.342648,
			        0.254399,
			        0.02344,
			        0.376417,
			        0.063563,
			        0.892619
			      ]
			    },
			    {
			      "meanCentroidDist": 0.194124,
			      "size": 5054,
			      "centroid": [
			        0.659236,
			        0.727096,
			        0.633262,
			        0.564795,
			        0.73544,
			        0.90899,
			        0.244159,
			        0.319285
			      ]
			    },
			    {
			      "meanCentroidDist": 0.337315,
			      "size": 5361,
			      "centroid": [
			        0.694483,
			        0.420314,
			        0.342883,
			        0.705068,
			        0.795386,
			        0.149458,
			        0.259902,
			        0.305659
			      ]
			    },
			    {
			      "meanCentroidDist": 0.421033,
			      "size": 9410,
			      "centroid": [
			        0.723467,
			        0.241261,
			        0.361302,
			        0.394847,
			        0.051119,
			        0.166132,
			        0.036718,
			        0.282793
			      ]
			    },
			    {
			      "meanCentroidDist": 0.31307,
			      "size": 5860,
			      "centroid": [
			        0.676402,
			        0.38175,
			        0.226439,
			        0.715935,
			        0.800914,
			        0.24031,
			        0.278641,
			        0.312369
			      ]
			    },
			    {
			      "meanCentroidDist": 0.305803,
			      "size": 4196,
			      "centroid": [
			        0.696422,
			        0.701042,
			        0.798729,
			        0.32632,
			        0.012172,
			        0.629258,
			        0.012883,
			        0.286836
			      ]
			    },
			    {
			      "meanCentroidDist": 0.355958,
			      "size": 4758,
			      "centroid": [
			        0.677033,
			        0.281934,
			        0.092619,
			        0.750249,
			        0.789199,
			        0.239798,
			        0.261696,
			        0.309912
			      ]
			    },
			    {
			      "meanCentroidDist": 0.212139,
			      "size": 20834,
			      "centroid": [
			        0.685955,
			        0.805,
			        0.774178,
			        0.578572,
			        0.775379,
			        0.478116,
			        0.244232,
			        0.293529
			      ]
			    }
			  ],
			  "intensities": [
			    [
			      -13.773908,
			      0,
			      0,
			      4.982699,
			      0,
			      8.791209,
			      0,
			      0
			    ],
			    [
			      0,
			      -1.424614,
			      0,
			      0,
			      0,
			      0,
			      0,
			      1.424614
			    ],
			    [
			      0,
			      0,
			      -1551.449028,
			      8.591885,
			      1542.857143,
			      0,
			      0,
			      0
			    ],
			    [
			      4.699739,
			      0,
			      0,
			      -9.238031,
			      0,
			      0,
			      4.538292,
			      0
			    ],
			    [
			      0,
			      0,
			      7.372014,
			      0,
			      -7.372014,
			      0,
			      0,
			      0
			    ],
			    [
			      4.477612,
			      33.962264,
			      0,
			      12.371134,
			      0,
			      -89.520688,
			      0,
			      38.709677
			    ],
			    [
			      0,
			      0,
			      163.636364,
			      0,
			      4.582096,
			      0,
			      -168.21846,
			      0
			    ],
			    [
			      0,
			      0,
			      0,
			      0,
			      0,
			      0.691178,
			      0,
			      -0.691178
			    ]
			  ],
			  "children": [
			    {
			      "id": "1",
			      "size": 2264,
			      "states": [
			        {
			          "meanCentroidDist": 0.527007,
			          "size": 258,
			          "centroid": [
			            0.091215,
			            0.416686,
			            0.3031,
			            0.824903,
			            0.004349,
			            0.403749,
			            0.862372,
			            0.890172
			          ]
			        },
			        {
			          "meanCentroidDist": 0.280094,
			          "size": 588,
			          "centroid": [
			            0.096747,
			            0.152768,
			            0.168309,
			            0.129557,
			            0.029744,
			            0.20294,
			            0.008247,
			            0.895186
			          ]
			        },
			        {
			          "meanCentroidDist": 0.098723,
			          "size": 520,
			          "centroid": [
			            0.090478,
			            0.577069,
			            0.634213,
			            0.307378,
			            0.042631,
			            0.891221,
			            0.028808,
			            0.874918
			          ]
			        },
			        {
			          "meanCentroidDist": 0.275826,
			          "size": 710,
			          "centroid": [
			            0.088687,
			            0.274701,
			            0.136295,
			            0.048035,
			            0.00428,
			            0.208141,
			            0.002253,
			            0.902221
			          ]
			        },
			        {
			          "meanCentroidDist": 0.280324,
			          "size": 954,
			          "centroid": [
			            0.08784,
			            0.150836,
			            0.191629,
			            0.300732,
			            0.021131,
			            0.192348,
			            0.004804,
			            0.907426
			          ]
			        },
			        {
			          "meanCentroidDist": 0.192351,
			          "size": 808,
			          "centroid": [
			            0.092173,
			            0.732316,
			            0.73303,
			            0.248363,
			            0.036797,
			            0.477695,
			            0.023008,
			            0.87519
			          ]
			        },
			        {
			          "meanCentroidDist": 0.085408,
			          "size": 210,
			          "centroid": [
			            0.086883,
			            0.62847,
			            0.62191,
			            0.087261,
			            0.003338,
			            0.907276,
			            0.002921,
			            0.878442
			          ]
			        },
			        {
			          "meanCentroidDist": 0.303919,
			          "size": 480,
			          "centroid": [
			            0.084508,
			            0.269745,
			            0.087666,
			            0.339735,
			            0.024428,
			            0.228538,
			            0.04189,
			            0.901876
			          ]
			        }
			      ],
			      "intensities": [
			        [
			          -379.139241,
			          0,
			          144,
			          0,
			          0,
			          144,
			          0,
			          91.139241
			        ],
			        [
			          0,
			          -475.174825,
			          0,
			          25.174825,
			          450,
			          0,
			          0,
			          0
			        ],
			        [
			          61.016949,
			          0,
			          -83.158251,
			          0,
			          0,
			          0.71273,
			          21.428571,
			          0
			        ],
			        [
			          0,
			          23.376623,
			          0,
			          -41.287071,
			          0,
			          0,
			          0,
			          17.910448
			        ],
			        [
			          0,
			          1.139241,
			          0,
			          0,
			          -139.600779,
			          0,
			          0,
			          138.461538
			        ],
			        [
			          9.72973,
			          0,
			          0,
			          0,
			          0.28925,
			          -10.018979,
			          0,
			          0
			        ],
			        [
			          0,
			          0,
			          34.285714,
			          0,
			          0,
			          0,
			          -34.285714,
			          0
			        ],
			        [
			          42.105263,
			          0,
			          0,
			          0,
			          138.461538,
			          0,
			          0,
			          -180.566802
			        ]
			      ],
			      "children": [

			      ]
			    },
			    {
			      "id": "2",
			      "size": 2681,
			      "states": [
			        {
			          "meanCentroidDist": 0.089957,
			          "size": 1188,
			          "centroid": [
			            0.691408,
			            0.441928,
			            0.36468,
			            0.671869,
			            0.810078,
			            0.242021,
			            0.27305,
			            0.30251
			          ]
			        },
			        {
			          "meanCentroidDist": 0.072388,
			          "size": 678,
			          "centroid": [
			            0.68924,
			            0.432275,
			            0.284166,
			            0.734994,
			            0.801729,
			            0.162872,
			            0.26519,
			            0.30545
			          ]
			        },
			        {
			          "meanCentroidDist": 0.092098,
			          "size": 788,
			          "centroid": [
			            0.670685,
			            0.479196,
			            0.426673,
			            0.695074,
			            0.800562,
			            0.134531,
			            0.295299,
			            0.325313
			          ]
			        },
			        {
			          "meanCentroidDist": 0.024153,
			          "size": 312,
			          "centroid": [
			            0.715445,
			            0.238612,
			            0.281256,
			            0.753767,
			            0.673448,
			            0.044478,
			            0.20662,
			            0.299397
			          ]
			        },
			        {
			          "meanCentroidDist": 0.084891,
			          "size": 620,
			          "centroid": [
			            0.685689,
			            0.463888,
			            0.378482,
			            0.702291,
			            0.800473,
			            0.155457,
			            0.282985,
			            0.310604
			          ]
			        },
			        {
			          "meanCentroidDist": 0.072834,
			          "size": 666,
			          "centroid": [
			            0.707476,
			            0.373964,
			            0.30395,
			            0.720203,
			            0.869471,
			            0.069044,
			            0.226909,
			            0.307209
			          ]
			        },
			        {
			          "meanCentroidDist": 0.039052,
			          "size": 360,
			          "centroid": [
			            0.723812,
			            0.30556,
			            0.283822,
			            0.719926,
			            0.667849,
			            0.060343,
			            0.193721,
			            0.290513
			          ]
			        },
			        {
			          "meanCentroidDist": 0.074412,
			          "size": 750,
			          "centroid": [
			            0.701931,
			            0.449386,
			            0.332826,
			            0.702532,
			            0.802901,
			            0.159217,
			            0.261361,
			            0.294683
			          ]
			        }
			      ],
			      "intensities": [
			        [
			          -5.960265,
			          0,
			          0,
			          0,
			          0,
			          0,
			          5.960265,
			          0
			        ],
			        [
			          0,
			          -62.427746,
			          0,
			          0,
			          0,
			          0,
			          0,
			          62.427746
			        ],
			        [
			          0,
			          0,
			          -654.545455,
			          0,
			          654.545455,
			          0,
			          0,
			          0
			        ],
			        [
			          0,
			          0,
			          0,
			          -23.076923,
			          0,
			          0,
			          23.076923,
			          0
			        ],
			        [
			          0,
			          0,
			          40.754717,
			          0,
			          -680.754717,
			          0,
			          0,
			          640
			        ],
			        [
			          0,
			          0,
			          0,
			          0,
			          0,
			          -10.810811,
			          10.810811,
			          0
			        ],
			        [
			          0.612662,
			          0.970612,
			          0,
			          0,
			          0,
			          21.176471,
			          -22.759744,
			          0
			        ],
			        [
			          0,
			          1384.615385,
			          0,
			          0,
			          89.502762,
			          0,
			          0,
			          -1474.118147
			        ]
			      ],
			      "children": [

			      ]
			    },
			    {
			      "id": "3",
			      "size": 4705,
			      "states": [
			        {
			          "meanCentroidDist": 0.12852,
			          "size": 960,
			          "centroid": [
			            0.70396,
			            0.325222,
			            0.309701,
			            0.329916,
			            0.004705,
			            0.100585,
			            0.006633,
			            0.310656
			          ]
			        },
			        {
			          "meanCentroidDist": 0.039497,
			          "size": 706,
			          "centroid": [
			            0.740381,
			            0.428741,
			            0.683385,
			            0.339029,
			            0.001671,
			            0.153534,
			            0.000642,
			            0.274953
			          ]
			        },
			        {
			          "meanCentroidDist": 0.193846,
			          "size": 1944,
			          "centroid": [
			            0.71231,
			            0.250356,
			            0.23539,
			            0.651757,
			            0.231835,
			            0.262785,
			            0.164484,
			            0.284167
			          ]
			        },
			        {
			          "meanCentroidDist": 0.124409,
			          "size": 1548,
			          "centroid": [
			            0.731384,
			            0.071887,
			            0.398897,
			            0.332535,
			            0.007031,
			            0.028055,
			            0.006512,
			            0.283773
			          ]
			        },
			        {
			          "meanCentroidDist": 0.129269,
			          "size": 770,
			          "centroid": [
			            0.711371,
			            0.296436,
			            0.294775,
			            0.321789,
			            0.002948,
			            0.250062,
			            0.00209,
			            0.282941
			          ]
			        },
			        {
			          "meanCentroidDist": 0.072152,
			          "size": 1368,
			          "centroid": [
			            0.737073,
			            0.187562,
			            0.565167,
			            0.329191,
			            0.002246,
			            0.094239,
			            0.000415,
			            0.278195
			          ]
			        },
			        {
			          "meanCentroidDist": 0.119979,
			          "size": 888,
			          "centroid": [
			            0.747432,
			            0.424654,
			            0.33435,
			            0.328264,
			            0.003852,
			            0.25872,
			            0.00426,
			            0.247591
			          ]
			        },
			        {
			          "meanCentroidDist": 0.180266,
			          "size": 1226,
			          "centroid": [
			            0.711752,
			            0.159424,
			            0.202243,
			            0.316518,
			            0.004075,
			            0.206243,
			            0.002359,
			            0.292609
			          ]
			        }
			      ],
			      "intensities": [
			        [
			          -34.538586,
			          0,
			          11.009174,
			          0,
			          0,
			          0,
			          0,
			          23.529412
			        ],
			        [
			          0,
			          -10.1983,
			          0,
			          0,
			          0,
			          10.1983,
			          0,
			          0
			        ],
			        [
			          9.703504,
			          0,
			          -411.232816,
			          400,
			          0,
			          0,
			          1.529312,
			          0
			        ],
			        [
			          0,
			          0,
			          9.302326,
			          -9.302326,
			          0,
			          0,
			          0,
			          0
			        ],
			        [
			          0,
			          0,
			          44.444444,
			          0,
			          -56.28655,
			          0,
			          0,
			          11.842105
			        ],
			        [
			          0,
			          0,
			          0,
			          5.263158,
			          0,
			          -5.263158,
			          0,
			          0
			        ],
			        [
			          0,
			          0,
			          0,
			          0,
			          16.216216,
			          0,
			          -16.216216,
			          0
			        ],
			        [
			          0,
			          0,
			          3.498542,
			          0,
			          0,
			          0,
			          0,
			          -3.498542
			        ]
			      ],
			      "children": [

			      ]
			    },
			    {
			      "id": "4",
			      "size": 2930,
			      "states": [
			        {
			          "meanCentroidDist": 0.038123,
			          "size": 458,
			          "centroid": [
			            0.663143,
			            0.365723,
			            0.254984,
			            0.706805,
			            0.810825,
			            0.246571,
			            0.292776,
			            0.330219
			          ]
			        },
			        {
			          "meanCentroidDist": 0.054555,
			          "size": 720,
			          "centroid": [
			            0.696221,
			            0.395677,
			            0.299615,
			            0.690722,
			            0.806565,
			            0.252107,
			            0.263096,
			            0.297793
			          ]
			        },
			        {
			          "meanCentroidDist": 0.030555,
			          "size": 880,
			          "centroid": [
			            0.686518,
			            0.392625,
			            0.22423,
			            0.720644,
			            0.794843,
			            0.279731,
			            0.262156,
			            0.307304
			          ]
			        },
			        {
			          "meanCentroidDist": 0.022715,
			          "size": 666,
			          "centroid": [
			            0.667695,
			            0.359303,
			            0.172361,
			            0.724001,
			            0.794744,
			            0.261415,
			            0.27979,
			            0.325355
			          ]
			        },
			        {
			          "meanCentroidDist": 0.0353,
			          "size": 514,
			          "centroid": [
			            0.664212,
			            0.313003,
			            0.212564,
			            0.708454,
			            0.812747,
			            0.280229,
			            0.27874,
			            0.32917
			          ]
			        },
			        {
			          "meanCentroidDist": 0.045773,
			          "size": 1324,
			          "centroid": [
			            0.683737,
			            0.387629,
			            0.177123,
			            0.718169,
			            0.801502,
			            0.181508,
			            0.276955,
			            0.295207
			          ]
			        },
			        {
			          "meanCentroidDist": 0.040127,
			          "size": 722,
			          "centroid": [
			            0.669586,
			            0.397505,
			            0.276254,
			            0.717855,
			            0.793598,
			            0.280239,
			            0.286815,
			            0.323902
			          ]
			        },
			        {
			          "meanCentroidDist": 0.04939,
			          "size": 576,
			          "centroid": [
			            0.659346,
			            0.414506,
			            0.241472,
			            0.737322,
			            0.799637,
			            0.185447,
			            0.30423,
			            0.319117
			          ]
			        }
			      ],
			      "intensities": [
			        [
			          -110.043668,
			          110.043668,
			          0,
			          0,
			          0,
			          0,
			          0,
			          0
			        ],
			        [
			          337.5,
			          -2279.256421,
			          0,
			          1.013514,
			          2.281369,
			          0,
			          1938.461538,
			          0
			        ],
			        [
			          0,
			          0,
			          -990.825688,
			          900,
			          0,
			          0,
			          90.825688,
			          0
			        ],
			        [
			          0,
			          0,
			          22.222222,
			          -1622.222222,
			          0,
			          1600,
			          0,
			          0
			        ],
			        [
			          14.007782,
			          0,
			          0,
			          0,
			          -14.007782,
			          0,
			          0,
			          0
			        ],
			        [
			          0,
			          0,
			          0,
			          771.428571,
			          0,
			          -826.984127,
			          0,
			          55.555556
			        ],
			        [
			          0,
			          164.634146,
			          1090.909091,
			          0,
			          0,
			          0,
			          -1255.543237,
			          0
			        ],
			        [
			          0,
			          0,
			          0,
			          0,
			          0,
			          1620,
			          0,
			          -1620
			        ]
			      ],
			      "children": [

			      ]
			    },
			    {
			      "id": "5",
			      "size": 2098,
			      "states": [
			        {
			          "meanCentroidDist": 0.150844,
			          "size": 676,
			          active: false,
			          "centroid": [
			            0.664341,
			            0.750279,
			            0.826304,
			            0.311788,
			            0.005049,
			            0.496718,
			            0.006043,
			            0.314301
			          ]
			        },
			        {
			          "meanCentroidDist": 0.185823,
			          "size": 580,
			          active: false,
			          "centroid": [
			            0.733385,
			            0.574419,
			            0.747121,
			            0.344441,
			            0.003728,
			            0.216535,
			            0.003331,
			            0.281811
			          ]
			        },
			        {
			          "meanCentroidDist": 0.046755,
			          "size": 672,
			          active: true,
			          "centroid": [
			            0.683127,
			            0.668093,
			            0.814765,
			            0.301597,
			            0.002983,
			            0.840761,
			            0.000911,
			            0.293953
			          ]
			        },
			        {
			          "meanCentroidDist": 0.139991,
			          "size": 156,
			          active: false,
			          "centroid": [
			            0.662932,
			            0.583083,
			            0.564007,
			            0.484029,
			            0.083754,
			            0.933434,
			            0.111395,
			            0.313749
			          ]
			        },
			        {
			          "meanCentroidDist": 0.172075,
			          "size": 180,
			          active: false,
			          "centroid": [
			            0.678913,
			            0.731512,
			            0.696609,
			            0.516219,
			            0.13279,
			            0.484351,
			            0.133064,
			            0.300408
			          ]
			        },
			        {
			          "meanCentroidDist": 0.130669,
			          "size": 810,
			          active: false,
			          "centroid": [
			            0.715321,
			            0.922844,
			            0.930699,
			            0.308651,
			            0.004479,
			            0.522282,
			            0.00466,
			            0.264326
			          ]
			        },
			        {
			          "meanCentroidDist": 0.028637,
			          "size": 270,
			          active: false,
			          "centroid": [
			            0.731254,
			            0.819935,
			            0.87251,
			            0.298329,
			            0.003567,
			            0.840761,
			            0.001573,
			            0.246774
			          ]
			        },
			        {
			          "meanCentroidDist": 0.087796,
			          "size": 852,
			          active: false,
			          "centroid": [
			            0.688022,
			            0.54078,
			            0.71504,
			            0.301684,
			            0.00227,
			            0.858156,
			            0.002232,
			            0.289154
			          ]
			        }
			      ],
			      "intensities": [
			        [
			          -1209.461235,
			          0,
			          0,
			          0,
			          9.461235,
			          1200,
			          0,
			          0
			        ],
			        [
			          0,
			          0,
			          0,
			          0,
			          0,
			          0,
			          0,
			          0
			        ],
			        [
			          0,
			          0,
			          -10.714286,
			          0,
			          0,
			          0,
			          0,
			          10.714286
			        ],
			        [
			          0,
			          0,
			          0,
			          -3600.847059,
			          0,
			          0.847059,
			          0,
			          3600
			        ],
			        [
			          189.473684,
			          0.407148,
			          0,
			          0,
			          -189.880832,
			          0,
			          0,
			          0
			        ],
			        [
			          26.666667,
			          0,
			          0,
			          0,
			          0,
			          -26.666667,
			          0,
			          0
			        ],
			        [
			          0,
			          0,
			          26.666667,
			          0,
			          0,
			          0,
			          -26.666667,
			          0
			        ],
			        [
			          0,
			          0,
			          0,
			          8.823529,
			          0,
			          0,
			          0,
			          -8.823529
			        ]
			      ],
			      "children": [

			      ]
			    },
			    {
			      "id": "6",
			      "size": 2379,
			      "states": [
			        {
			          "meanCentroidDist": 0.070474,
			          "size": 622,
			          active: true,
			          "centroid": [
			            0.675145,
			            0.359545,
			            0.109885,
			            0.727672,
			            0.80207,
			            0.203255,
			            0.264895,
			            0.303629
			          ]
			        },
			        {
			          "meanCentroidDist": 0.056384,
			          "size": 854,
			          active: false,
			          "centroid": [
			            0.676444,
			            0.309647,
			            0.12396,
			            0.756085,
			            0.795479,
			            0.262908,
			            0.265909,
			            0.31718
			          ]
			        },
			        {
			          "meanCentroidDist": 0.06054,
			          "size": 382,
			          active: false,
			          "centroid": [
			            0.686576,
			            0.242316,
			            0.010456,
			            0.773511,
			            0.776321,
			            0.242021,
			            0.235045,
			            0.29258
			          ]
			        },
			        {
			          "meanCentroidDist": 0.061282,
			          "size": 786,
			          active: false,
			          "centroid": [
			            0.675947,
			            0.338131,
			            0.062127,
			            0.716623,
			            0.801589,
			            0.204898,
			            0.273839,
			            0.302843
			          ]
			        },
			        {
			          "meanCentroidDist": 0.066654,
			          "size": 726,
			          active: false,
			          "centroid": [
			            0.68341,
			            0.237538,
			            0.162654,
			            0.731103,
			            0.812075,
			            0.280239,
			            0.264959,
			            0.310351
			          ]
			        },
			        {
			          "meanCentroidDist": 0.04657,
			          "size": 884,
			          active: false,
			          "centroid": [
			            0.67854,
			            0.22031,
			            0.076156,
			            0.805537,
			            0.789685,
			            0.25027,
			            0.24592,
			            0.313793
			          ]
			        },
			        {
			          "meanCentroidDist": 0.132572,
			          "size": 106,
			          active: false,
			          "centroid": [
			            0.693362,
			            0.121437,
			            0.183809,
			            0.749774,
			            0.508669,
			            0.149791,
			            0.187698,
			            0.316801
			          ]
			        },
			        {
			          "meanCentroidDist": 0.069153,
			          "size": 398,
			          active: false,
			          "centroid": [
			            0.654906,
			            0.288828,
			            0.021994,
			            0.729345,
			            0.775404,
			            0.241051,
			            0.298054,
			            0.32347
			          ]
			        }
			      ],
			      "intensities": [
			        [
			          0,
			          0,
			          0,
			          0,
			          0,
			          0,
			          0,
			          0
			        ],
			        [
			          0,
			          -1.292175,
			          0,
			          0,
			          0,
			          0,
			          1.292175,
			          0
			        ],
			        [
			          0,
			          0,
			          -1819.047619,
			          0,
			          0,
			          1800,
			          0,
			          19.047619
			        ],
			        [
			          9.278351,
			          0,
			          0,
			          -729.278351,
			          0,
			          0,
			          0,
			          720
			        ],
			        [
			          0,
			          0,
			          0,
			          0,
			          -1.077199,
			          0,
			          1.077199,
			          0
			        ],
			        [
			          0,
			          8.633094,
			          144,
			          0,
			          0,
			          -152.633094,
			          0,
			          0
			        ],
			        [
			          0,
			          0,
			          900,
			          0,
			          514.285714,
			          1.604993,
			          -1415.890708,
			          0
			        ],
			        [
			          0,
			          0,
			          0,
			          36.180905,
			          0,
			          0,
			          0,
			          -36.180905
			        ]
			      ],
			      "children": [

			      ]
			    }
			  ]
			};
	
	
	</script>
</head>

<body>
<p>
	JSON url: <input style="text" id="inputJsonUrl">
	<button onclick="generateNetwork()">GO</button>
</p>

<div style="height:100%">
	<div id="network" style="float:left; width:50%; height:100%"></div> <div id="tree" style="float:right; width:50%; height:100%"></div>
</div>

<script type="text/javascript">
function generateNetwork()
{
//	var json = '{"result":true,"count":1}',
//	obj = JSON.parse(json);
//	var jsonUrl = "";
//	document.write("i'm here");
	var numOfNodesInNetwork = 0;
	var numOfNodesInTree = 0;
	
	
	var dataObject;
	var jsonUrl = document.getElementById("inputJsonUrl").value;
//	alert("url: " + jsonUrl);
//	if (jsonUrl !== null || jsonUrl !== undefined) {
	if (jsonUrl) {
		$.ajax({
			url: jsonUrl,
			data: { },
			success: function (data) {
				alert("received!");
				dataObject = data;
			},	
			dataType: 'json'
//			error: function (jqXHR jqXHR, String textStatus, String errorThrown ) {
//				alert("failed to receive object: " + textStatus + ", " + errorThrown);
//				dataObject = jsonTestObject;
//			}
		});
	} else {		//test object
		alert("failed to receive JSON object, assigning test object.");
		dataObject = jsonTestNewObject;
	}
	

	alert("Here 1, dataObject.intensities.length: " + jsonTestNewObject.intensities.length);
	var jsonTable = [];			// NEW / this is where all the json objects will be stored... later this will be used to find children (through parentid) and later add them to network
//	jsonTable.push(jsonTestObject);
//	jsonTable.push(dataObject);
	jsonTable.push(jsonTestNewObject);
	
	var groupsTable = [];
	
	var treeNodes = new vis.DataSet();
	var treeEdges = new vis.DataSet();
	var networkNodes = new vis.DataSet();
	var networkEdges = new vis.DataSet();
	
//	treeNodes.add({id: 0, label: "root"});
	
//	addNodesToTree(jsonTable);
	addNodesAndEdgesToTree(dataObject);
	
	var networkContainer = document.getElementById('network');
	var treeContainer = document.getElementById("tree");
	var treeData = {
		nodes: treeNodes,
		edges: treeEdges
	};
	
	var networkData= {
		nodes: networkNodes,
		edges: networkEdges
	};
	var networkOptions = {
//		clustering: false,
//		dataManipulation: true,
		
		edges: {
			style: "arrow",
			arrowScaleFactor: 0.4,
			widthMax: 6
		}
			
//		width: '50%',
//		height: '50%'
	};
	
	var treeOptions = {
		hierarchicalLayout: {
			layout: "direction"
		},
		
		edges: {
			style: "arrow",
			arrowScaleFactor: 0.4
		}
				
//		width: '50%',
//		height: '50%'
	};
	var network = new vis.Network(networkContainer, networkData, networkOptions);
	var tree = new vis.Network(treeContainer, treeData, treeOptions);
	
//	network.on('select', onSelect);
//	network.on('doubleClick', onDoubleClick);
	tree.on('select', onTreeSelect);
	tree.on('doubleClick', onTreeDoubleClick);
	
	function onDoubleClick(properties) {
		alert("double click");
	}
	
	function onTreeDoubleClick(properties) {
//		alert("double click, node id: " + properties.nodes[0]);
		constructNetwork(properties.nodes[0]);
	}
	
	function onTreeSelect(properties) {
		if (properties.nodes[0]) {
			constructNetwork(properties.nodes[0]);
		}
		
	}
	
	function addNodesAndEdgesToTree(jsonObject) {
		
//		alert("adding jsonObject with id: " + jsonObject.id + " jsonObject.children.length: " + jsonObject.children.length);
		//add nodes to tree, adds parent nodes and checks if the parent has a parent
		treeNodes.add({id: jsonObject.id, label: "" + jsonObject.id, childrenActive: false});
//		numOfNodesInTree++;
		groupsTable.push({id: jsonObject.id, states: jsonObject.states, intensities: jsonObject.intensities});
		
		for (var i = 0; i < jsonObject.children.length; i++) {
			addNodesAndEdgesToTree(jsonObject.children[i]);
			addEdgeToTree(jsonObject.id, jsonObject.children[i].id);
		}
	}
	
	function addEdgeToTree(id, childId) {
		treeEdges.add({from: id, to: childId, width: 3});
	}
	
	function constructNetwork(clickedId) {
		networkData.nodes.clear();
		networkData.edges.clear();
		
		for (var i = 0; i < groupsTable.length; i++) {
			if (groupsTable[i].id == clickedId) {
				
				// add nodes
				for (var j = 0; j < groupsTable[i].states.length; j++) {
					if (groupsTable[i].states[j].active) {
						networkNodes.add({id: j, shape: "dot", value: groupsTable[i].states[j].size, 
							label: "" + groupsTable[i].states[j].size, 
							color: {background: "#97C2FC", border: "red"} });
					} else {
						networkNodes.add({id: j, shape: "dot", value: groupsTable[i].states[j].size, 
							label: "" + groupsTable[i].states[j].size, color: {background: "#97C2FC", border: "#2B7CE9"} });
					}
					
				}
				
				//add edges
				for (var x = 0; x < groupsTable[i].intensities.length; x++) {
					for (var y = 0; y < groupsTable[i].intensities[x].length; y++) {
						if (groupsTable[i].intensities[x][y] > 0) {
							networkEdges.add({from: x, to: y, value: groupsTable[i].intensities[x][y],
											label: "" + groupsTable[i].intensities[x][y].toFixed(2)});
						}
					}
				}
			}
		}
	}
	
}

function onSelect(properties) {
//	alert("selected node: " + properties.nodes);
}


</script>

</body>
</html>
